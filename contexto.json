{
  "proyecto": "Sistema de Gestion RH - SEP/CORDE Tehuacan",
  "version": "0.3.0",
  "fecha_inicio": "2026-02-14",
  "ultima_sesion": "2026-02-18",
  "deadline": "3.5 semanas desde inicio",
  "stack": {
    "backend": "FastAPI + SQLAlchemy + SQLite",
    "frontend": "React 18 + Vite + TailwindCSS v4",
    "auth": "JWT (python-jose) + bcrypt 4.0.1 (passlib)",
    "pdf": "reportlab 4.1.0",
    "deploy": "Windows 10, red local, puerto 8080"
  },
  "estado_fases": {
    "fase_1_setup_auth": "completada",
    "fase_2_justificantes": "completada - backend + PDF generation + frontend download",
    "fase_3_prestaciones_docs": "completada",
    "fase_4_reportes_admin": "completada - 8 reportes + export Excel",
    "pdf_generation": "completada - justificantes (F/004) y prestaciones (F/005)"
  },
  "modulos": {
    "autenticacion": { "estado": "completo", "backend": true, "frontend": true },
    "empleados": { "estado": "completo", "backend": true, "frontend": true },
    "justificantes": { "estado": "completo", "backend": true, "frontend": true },
    "prestaciones": { "estado": "completo", "backend": true, "frontend": true },
    "documentos": { "estado": "completo", "backend": true, "frontend": true },
    "adeudos": {
      "estado": "completo",
      "backend": true,
      "frontend": true,
      "nota": "RediseÃ±ado 2026-02-16: monto eliminado, reemplazado por dias_debe + justificante_id"
    },
    "notificaciones": { "estado": "completo", "backend": true, "frontend": true },
    "reportes": {
      "estado": "completo",
      "backend": true,
      "frontend": true,
      "tipos": ["ausentismo", "dias-economicos", "permisos-horas", "prestaciones", "justificantes", "adeudos", "extemporaneos", "estadisticas-justificantes"],
      "export": "Excel via openpyxl"
    },
    "calendario_laboral": { "estado": "completo", "backend": true, "frontend": false, "nota": "servicio interno, no tiene UI propia" },
    "auditoria": { "estado": "completo", "backend": true, "frontend": false },
    "pdf_generation": {
      "estado": "completo",
      "backend": true,
      "frontend": true,
      "formatos": ["F/004 (justificantes)", "F/005 (prestaciones)"],
      "tecnologia": "reportlab 4.1.0",
      "almacenamiento": "data/pdfs/"
    }
  },
  "base_de_datos": {
    "tablas": ["users", "empleados", "justificantes", "prestaciones", "documentos", "adeudos", "notificaciones", "contadores", "audit_log", "calendario_laboral"],
    "ubicacion": "backend/data/empleados.db",
    "usuarios_prueba": {
      "root": { "username": "david", "password": "Admin123!" },
      "admins": ["maria.lopez", "ana.garcia"],
      "usuarios": ["juan.perez", "pedro.martinez", "carlos.ramirez"],
      "password_default": "Temp123!"
    },
    "empleados_prueba": 5
  },
  "archivos_clave": {
    "backend_entry": "backend/app/main.py",
    "config": "backend/app/config.py",
    "database": "backend/app/database.py",
    "calendario_service": "backend/app/services/calendario_service.py",
    "auth_service": "backend/app/services/auth_service.py",
    "pdf_service": "backend/app/services/pdf_service.py",
    "dia_economico_validator": "backend/app/validators/dia_economico_validator.py",
    "prestacion_validator": "backend/app/validators/prestacion_validator.py",
    "export_service": "backend/app/services/export_service.py",
    "reportes_routes": "backend/app/routes/reportes.py",
    "frontend_entry": "frontend/src/App.jsx",
    "api_client": "frontend/src/services/api.js",
    "auth_context": "frontend/src/contexts/AuthContext.jsx"
  },
  "notas_tecnicas": [
    "passlib requiere bcrypt==4.0.1 (incompatible con 5.x)",
    "TailwindCSS v4: @import 'tailwindcss' + @tailwindcss/vite plugin",
    "Vite proxy: /api -> http://localhost:8080",
    "Git inicializado - branch main",
    "Adeudos: dias_debe (int) + justificante_id (FK nullable) en lugar de monto (float)",
    "PDFs generados con reportlab, guardados en data/pdfs/{justificantes,prestaciones}/",
    "Prestacion.pdf_path agregado via ALTER TABLE (migracion scripts/add_pdf_path_to_prestaciones.py)"
  ],
  "cambios_recientes": [
    {
      "fecha": "2026-02-18",
      "descripcion": "Generacion PDF con reportlab: justificantes (F/004) y prestaciones (F/005)",
      "archivos": [
        "backend/requirements.txt",
        "backend/app/config.py",
        "backend/app/models/prestacion.py",
        "backend/app/schemas/prestacion.py",
        "backend/app/services/pdf_service.py (nuevo)",
        "backend/app/routes/justificantes.py",
        "backend/app/routes/prestaciones.py",
        "backend/scripts/add_pdf_path_to_prestaciones.py (nuevo)",
        "frontend/src/pages/Justificantes.jsx",
        "frontend/src/pages/Prestaciones.jsx"
      ]
    },
    {
      "fecha": "2026-02-16",
      "descripcion": "Rediseno de Adeudos: monto -> dias_debe + justificante_id",
      "archivos": [
        "backend/app/models/adeudo.py",
        "backend/app/schemas/adeudo.py",
        "backend/app/schemas/reporte.py",
        "backend/app/routes/adeudos.py",
        "backend/app/routes/reportes.py",
        "frontend/src/pages/Adeudos.jsx",
        "frontend/src/pages/Reportes.jsx"
      ]
    }
  ],
  "pendientes_proxima_sesion": [
    "Testing unitario de validadores",
    "CRUD calendario laboral desde UI",
    "Ingresar empleados reales cuando se tengan",
    "Mejorar PDFs cuando se obtengan templates oficiales SEP"
  ],
  "datos_pendientes_del_cliente": [
    "Fechas exactas vacaciones administrativas 2025-2026",
    "Lista completa de 49 empleados",
    "Nombres de las 4 jefas RH",
    "Logo SEP (opcional)",
    "Templates PDF oficiales (SEP-1.3.1.3/DRH/F/004 y F/005) para mejorar el layout"
  ]
}
